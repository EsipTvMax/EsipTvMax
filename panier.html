<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Panier â€“ EsipTvMax</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="main-header">
  <div class="header-container">
    <div class="logo"><span class="logo-main">Esip</span><span class="logo-accent">TvMax</span></div>
    <nav class="main-nav">
      <a href="index.html">Accueil</a>
      <a href="abonnements.html">Abonnements</a>
      <a href="telechargement.html">TÃ©lÃ©chargement</a>
      <a href="faq.html">FAQ</a>
      <a href="contact.html">Contact</a>
      <a href="panier.html" class="panier-link">
  ðŸ›’ Panier (<span id="cart-count">0</span>)
</a>
    </nav>
  </div>
</header>

<h2 class="title">Votre panier</h2>

<div id="cart-items" class="cart-container"></div>

<h3 id="cart-total" class="cart-total"></h3>

  <div class="cart-actions">
  <button id="checkout-btn" class="btn btn-primary">
    Payer maintenant
  </button>
</div>

<div class="promo-box">
  <label for="promo-code">Code promotionnel</label>

  <div class="promo-row">
    <input
      type="text"
      id="promo-code"
      placeholder="Entrez votre code"
    >
    <button onclick="applyPromo()" class="btn promo-btn">Appliquer</button>
  </div>

  <p class="promo-info">
    Les codes promotionnels sont soumis Ã  conditions.
  </p>
</div>

<div class="cart-actions">
  <button onclick="clearCart()" class="btn">Vider le panier</button>
</div>

<script src="script.js"></script>

  <script>
document.getElementById("checkout-btn").addEventListener("click", async () => {
  try {
    const response = await fetch("/.netlify/functions/create-checkout");
    const data = await response.json();

    if (data.url) {
      window.location.href = data.url;
    } else {
      alert("Erreur lors de la crÃ©ation du paiement");
    }
  } catch (e) {
    alert("Impossible de contacter Stripe");
  }
});
</script>
</body>
</html>
